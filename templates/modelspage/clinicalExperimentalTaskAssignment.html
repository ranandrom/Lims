{% extends 'base.html' %}

{% block content %}

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel" >
                <input type="button" value="样本预处理" class="btn btn-primary" style=" border: 0; background-color: white; color: red" id="Pretreatment" onclick="show(this)"/>
                <input type="button" value="DNA提取" class="btn btn-primary" style=" border: 0; background-color: white; color: black" id="DNAExtract" onclick="show(this)"/>
                <input type="button" value="预文库构建"  class="btn btn-primary" style=" border: 0;background-color: white; color: black" id="PreLibraryConstruction" onclick="show(this)"/>
                <input type="button" value="终文库构建"  class="btn btn-primary" style=" border: 0;background-color: white; color: black" id="FinalLibraryConstruction" onclick="show(this)"/>
                <input type="button" value="上机测序"  class="btn btn-primary" style=" border: 0;background-color: white; color: black" id="ComputerSequencing" onclick="show(this)"/>
                <input type="button" value="其他信息"  class="btn btn-primary" style=" border: 0;background-color: white; color: black" id="OtherInformation" onclick="show(this)"/>
            </div>
            </div>
        </div>

        <div class="row" style="display:block" id="DivDPretreatment">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>样本预处理任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                  <div style="width: 20%">
                      <form name="Searchform_Pretreatment">
                          <input type="text" id="Searchval_Pretreatment" name="Searchval_Pretreatment" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_Pretreatment","Pretreatment_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="Pretreatment_btn0"></a>
                    <input id="Pretreatment_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="Pretreatment_pageSizeSet">设置</a> 
                    <a id="Pretreatment_sjzl"></a> 
                    <a href="#" id="Pretreatment_btn1">首页</a>
                    <a href="#" id="Pretreatment_btn2">上一页</a>
                    <a href="#" id="Pretreatment_btn3">下一页</a>
                    <a href="#" id="Pretreatment_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="Pretreatment_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="Pretreatment_btn5">跳转</a><p></p>
                    <table id="Pretreatment_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>客户名称</th>
                          <th>性别</th>
                          <th>年龄（岁）</th>
                          <th>样本类型</th>
                          <th>产品名称</th>
                          <th>就诊医院</th>
                          <th>收样时间</th>
                          <th>实验编号</th>
                          <th>操作</th>

                        </tr>
                      </thead>

                       <tbody id="Pretreatment_tbody_review">
                        {%  for data in Pretreatment_not_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/Pretreatment_taskToExamine/">
                            <tr>
                                <td >{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.PatientName }}<input type="hidden" value = "{{ data.PatientName }}"/></td>
                                <td>{{ data.PatientSex }}<input type="hidden" value = "{{ data.PatientSex }}"/></td>
                                <td>{{ data.PatientAge }}<input type="hidden" value = "{{ data.PatientAge }}"/></td>
                                <td>{{ data.sample_type }}<input type="hidden" value = "{{ data.sample_type }}"/></td>
                                <td>{{ data.product_name }}<input type="hidden" value = "{{ data.product_name }}"/></td>
                                <td>{{ data.treatment_hospital }}<input type="hidden" value = "{{ data.treatment_hospital }}"/></td>
                                <td>{{ data.CollectSamplesDate }}<input type="hidden" value = "{{ data.CollectSamplesDate }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var Pretreatment_pageSize = 5;    //每页显示的记录条数
               var Pretreatment_curPage=0;        //当前页
               var Pretreatment_lastPage;        //最后页
                var Pretreatment_direct=0;        //方向
               var Pretreatment_len;            //总行数
               var Pretreatment_page;            //总页数
               var Pretreatment_begin;
               var Pretreatment_end;
               
               $(document).ready(function Pretreatment_display(){  
                Pretreatment_len =$("#Pretreatment_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                Pretreatment_page=Pretreatment_len % Pretreatment_pageSize==0 ? Pretreatment_len/Pretreatment_pageSize : Math.floor(Pretreatment_len/Pretreatment_pageSize)+1;//根据记录条数，计算页数
                Pretreatment_curPage=1;    // 设置当前为第一页
                Pretreatment_displayPage(1);//显示第一页

                document.getElementById("Pretreatment_btn0").innerHTML="当前 " + Pretreatment_curPage + "/" + Pretreatment_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("Pretreatment_sjzl").innerHTML="数据总量 " + Pretreatment_len + "条";        // 显示数据量
                document.getElementById("Pretreatment_pageSize").value = Pretreatment_pageSize;        

                $("#Pretreatment_btn1").click(function Pretreatment_firstPage(){    // 首页
                    Pretreatment_curPage=1;
                    Pretreatment_direct = 0;
                    Pretreatment_displayPage();
                });
                $("#Pretreatment_btn2").click(function Pretreatment_frontPage(){    // 上一页
                    Pretreatment_direct=-1;
                    Pretreatment_displayPage();
                });
                $("#Pretreatment_btn3").click(function Pretreatment_nextPage(){    // 下一页
                    Pretreatment_direct=1;
                    Pretreatment_displayPage();
                });
                $("#Pretreatment_btn4").click(function Pretreatment_lastPage(){    // 尾页
                    Pretreatment_curPage=Pretreatment_page;
                    Pretreatment_direct = 0;
                    Pretreatment_displayPage();
                });
                $("#Pretreatment_btn5").click(function Pretreatment_changePage(){    // 转页
                    Pretreatment_curPage=document.getElementById("Pretreatment_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(Pretreatment_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (Pretreatment_curPage > Pretreatment_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    Pretreatment_direct = 0;
                    Pretreatment_displayPage();
                });
               
                $("#Pretreatment_pageSizeSet").click(function Pretreatment_setPageSize(){    // 设置每页显示多少条记录
                    Pretreatment_pageSize = document.getElementById("Pretreatment_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(Pretreatment_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       Pretreatment_len =$("#Pretreatment_tbody_review tr").length;
                    Pretreatment_page=Pretreatment_len % Pretreatment_pageSize==0 ? Pretreatment_len/Pretreatment_pageSize : Math.floor(Pretreatment_len/Pretreatment_pageSize)+1;//根据记录条数，计算页数
                    Pretreatment_curPage=1;        //当前页
                    Pretreatment_direct=0;        //方向
                                       Pretreatment_displayPage();//显示第一页
                });
            });

            function Pretreatment_displayPage(){
                if(Pretreatment_curPage <=1 && Pretreatment_direct==-1){
                    Pretreatment_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (Pretreatment_curPage >= Pretreatment_page && Pretreatment_direct==1) {
                    Pretreatment_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                Pretreatment_lastPage = Pretreatment_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (Pretreatment_len > Pretreatment_pageSize) {
                                        if (Pretreatment_pageSize!=1) {
                                            Pretreatment_curPage = ((Pretreatment_curPage + Pretreatment_direct + Pretreatment_len) % Pretreatment_len);
                                        } else {
                                            Pretreatment_curPage = Pretreatment_curPage + Pretreatment_direct;
                                        }
                } else {
                    Pretreatment_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("Pretreatment_btn0").innerHTML="当前 " + Pretreatment_curPage + "/" + Pretreatment_page + " 页    每页 ";        // 显示当前多少页

                Pretreatment_begin=(Pretreatment_curPage-1)*Pretreatment_pageSize;// 起始记录号
                Pretreatment_end = Pretreatment_begin + 1*Pretreatment_pageSize - 1;    // 末尾记录号
                              
                if(Pretreatment_end > Pretreatment_len ) Pretreatment_end=Pretreatment_len;
                $("#Pretreatment_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#Pretreatment_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=Pretreatment_begin && x<=Pretreatment_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:block" id="DivDPretreatmentAss">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>样本预处理任务已分派 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                <div style="width: 20%">
                      <form name="Searchform_PretreatmentAss">
                          <input type="text" id="Searchval_PretreatmentAss" name="Searchval_PretreatmentAss" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_PretreatmentAss","PretreatmentAss_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="PretreatmentAss_btn0"></a>
                    <input id="PretreatmentAss_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="PretreatmentAss_pageSizeSet">设置</a> 
                    <a id="PretreatmentAss_sjzl"></a> 
                    <a href="#" id="PretreatmentAss_btn1">首页</a>
                    <a href="#" id="PretreatmentAss_btn2">上一页</a>
                    <a href="#" id="PretreatmentAss_btn3">下一页</a>
                    <a href="#" id="PretreatmentAss_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="PretreatmentAss_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="PretreatmentAss_btn5">跳转</a><p></p>
                    <table id="PretreatmentAss_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>客户名称</th>
                          <th>样本类型</th>
                          <th>产品名称</th>
                          <th>收样时间</th>
                          <th>实验编号</th>
                          <th>任务接收者</th>
                          <th>任务进度</th>
                          <th>任务派送时间</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="PretreatmentAss_tbody_review">
                        {%  for data in Pretreatment_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/Pretreatment_taskToExamineDetermine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.PatientName }}<input type="hidden" value = "{{ data.PatientName }}"/></td>
                                <td>{{ data.sample_type }}<input type="hidden" value = "{{ data.sample_type }}"/></td>
                                <td>{{ data.product_name }}<input type="hidden" value = "{{ data.product_name }}"/></td>
                                <td>{{ data.CollectSamplesDate }}<input type="hidden" value = "{{ data.CollectSamplesDate }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Next_TaskProgress_Man }}<input type="hidden" value = "{{ data.Next_TaskProgress_Man }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time }}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info" name="Pretreatment_audited">查看信息</button>
                                    <button type="submit" class="label label-info" style="display: none; background: #6ebe9a" id="Pretreatment_audited_ModifyData{{ data.id }}" name="ModifyData">修改信息</button>
                                </td>
                                <script type="text/javascript">
                                    if(document.getElementById("IP_department").value=="管理员"){
                                        document.getElementById("Pretreatment_audited_ModifyData"+{{ data.id }}).style.display="";
                                    }
                                </script>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var PretreatmentAss_pageSize = 5;    //每页显示的记录条数
               var PretreatmentAss_curPage=0;        //当前页
               var PretreatmentAss_lastPage;        //最后页
                var PretreatmentAss_direct=0;        //方向
               var PretreatmentAss_len;            //总行数
               var PretreatmentAss_page;            //总页数
               var PretreatmentAss_begin;
               var PretreatmentAss_end;
               
               $(document).ready(function PretreatmentAss_display(){  
                PretreatmentAss_len =$("#PretreatmentAss_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                PretreatmentAss_page=PretreatmentAss_len % PretreatmentAss_pageSize==0 ? PretreatmentAss_len/PretreatmentAss_pageSize : Math.floor(PretreatmentAss_len/PretreatmentAss_pageSize)+1;//根据记录条数，计算页数
                PretreatmentAss_curPage=1;    // 设置当前为第一页
                PretreatmentAss_displayPage(1);//显示第一页

                document.getElementById("PretreatmentAss_btn0").innerHTML="当前 " + PretreatmentAss_curPage + "/" + PretreatmentAss_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("PretreatmentAss_sjzl").innerHTML="数据总量 " + PretreatmentAss_len + "条";        // 显示数据量
                document.getElementById("PretreatmentAss_pageSize").value = PretreatmentAss_pageSize;        

                $("#PretreatmentAss_btn1").click(function PretreatmentAss_firstPage(){    // 首页
                    PretreatmentAss_curPage=1;
                    PretreatmentAss_direct = 0;
                    PretreatmentAss_displayPage();
                });
                $("#PretreatmentAss_btn2").click(function PretreatmentAss_frontPage(){    // 上一页
                    PretreatmentAss_direct=-1;
                    PretreatmentAss_displayPage();
                });
                $("#PretreatmentAss_btn3").click(function PretreatmentAss_nextPage(){    // 下一页
                    PretreatmentAss_direct=1;
                    PretreatmentAss_displayPage();
                });
                $("#PretreatmentAss_btn4").click(function PretreatmentAss_lastPage(){    // 尾页
                    PretreatmentAss_curPage=PretreatmentAss_page;
                    PretreatmentAss_direct = 0;
                    PretreatmentAss_displayPage();
                });
                $("#PretreatmentAss_btn5").click(function PretreatmentAss_changePage(){    // 转页
                    PretreatmentAss_curPage=document.getElementById("PretreatmentAss_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(PretreatmentAss_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (PretreatmentAss_curPage > PretreatmentAss_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    PretreatmentAss_direct = 0;
                    PretreatmentAss_displayPage();
                });
               
                $("#PretreatmentAss_pageSizeSet").click(function PretreatmentAss_setPageSize(){    // 设置每页显示多少条记录
                    PretreatmentAss_pageSize = document.getElementById("PretreatmentAss_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(PretreatmentAss_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       PretreatmentAss_len =$("#PretreatmentAss_tbody_review tr").length;
                    PretreatmentAss_page=PretreatmentAss_len % PretreatmentAss_pageSize==0 ? PretreatmentAss_len/PretreatmentAss_pageSize : Math.floor(PretreatmentAss_len/PretreatmentAss_pageSize)+1;//根据记录条数，计算页数
                    PretreatmentAss_curPage=1;        //当前页
                    PretreatmentAss_direct=0;        //方向
                                       PretreatmentAss_displayPage();//显示第一页
                });
            });

            function PretreatmentAss_displayPage(){
                if(PretreatmentAss_curPage <=1 && PretreatmentAss_direct==-1){
                    PretreatmentAss_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (PretreatmentAss_curPage >= PretreatmentAss_page && PretreatmentAss_direct==1) {
                    PretreatmentAss_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                PretreatmentAss_lastPage = PretreatmentAss_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (PretreatmentAss_len > PretreatmentAss_pageSize) {
                                        if (PretreatmentAss_pageSize!=1) {
                                            PretreatmentAss_curPage = ((PretreatmentAss_curPage + PretreatmentAss_direct + PretreatmentAss_len) % PretreatmentAss_len);
                                        } else {
                                            PretreatmentAss_curPage = PretreatmentAss_curPage + PretreatmentAss_direct;
                                        }
                } else {
                    PretreatmentAss_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("PretreatmentAss_btn0").innerHTML="当前 " + PretreatmentAss_curPage + "/" + PretreatmentAss_page + " 页    每页 ";        // 显示当前多少页

                PretreatmentAss_begin=(PretreatmentAss_curPage-1)*PretreatmentAss_pageSize;// 起始记录号
                PretreatmentAss_end = PretreatmentAss_begin + 1*PretreatmentAss_pageSize - 1;    // 末尾记录号
                              
                if(PretreatmentAss_end > PretreatmentAss_len ) PretreatmentAss_end=PretreatmentAss_len;
                $("#PretreatmentAss_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#PretreatmentAss_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=PretreatmentAss_begin && x<=PretreatmentAss_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivDNAExt">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>DNA提取任务<small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                <div style="width: 20%">
                      <form name="Searchform_DNAExt">
                          <input type="text" id="Searchval_DNAExt" name="Searchval_DNAExt" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_DNAExt","tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">

					<a id="btn0"></a>
                    <input id="pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="pageSizeSet">设置</a> 
                    <a id="sjzl"></a> 
                    <a href="#" id="btn1">首页</a>
                    <a href="#" id="btn2">上一页</a>
                    <a href="#" id="btn3">下一页</a>
                    <a href="#" id="btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="btn5">跳转</a><p></p>
                    <table id="datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>采血管类型</th>
                          <th>分离后血浆管数</th>
                          <th>血浆体积(mL)</th>
                          <th>白细胞管数</th>
                          <th>白细胞体积(mL)</th>
                          <th>操作人</th>
                          <th>操作时间</th>
                          <th>操作</th>

                        </tr>
                      </thead>

                       <tbody id="tbody_review">

                        {%  for data in DNA_not_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/DNAExtract_taskToExamine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Types_of_blood_vessel }}<input type="hidden" value = "{{ data.Types_of_blood_vessel }}"/></td>
                                <td>{{ data.number_of_plasma }}<input type="hidden" value = "{{ data.number_of_plasma }}"/></td>
                                <td>{{ data.Plasma_volume }}<input type="hidden" value = "{{ data.Plasma_volume }}"/></td>
                                <td>{{ data.number_of_white_blood_cells }}<input type="hidden" value = "{{ data.number_of_white_blood_cells }}"/></td>
                                <td>{{ data.Leukocyte_volume }}<input type="hidden" value = "{{ data.Leukocyte_volume }}"/></td>
                                <td>{{ data.Operator }}<input type="hidden" value = "{{ data.Operator }}"/></td>
                                <td>{{ data.Operating_time }}<input type="hidden" value = "{{ data.Operating_time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var pageSize = 5;    //每页显示的记录条数
               var curPage=0;        //当前页
               var lastPage;        //最后页
                var direct=0;        //方向
               var len;            //总行数
               var page;            //总页数
               var begin;
               var end;
               
               $(document).ready(function display(){  
                len =$("#tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                page=len % pageSize==0 ? len/pageSize : Math.floor(len/pageSize)+1;//根据记录条数，计算页数
                curPage=1;    // 设置当前为第一页
                displayPage(1);//显示第一页
                               resub(); //直接审核按钮

                document.getElementById("btn0").innerHTML="当前 " + curPage + "/" + page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("sjzl").innerHTML="数据总量 " + len + "条";        // 显示数据量
                document.getElementById("pageSize").value = pageSize;          

                $("#btn1").click(function firstPage(){    // 首页
                    curPage=1;
                    direct = 0;
                    displayPage();
                });
                $("#btn2").click(function frontPage(){    // 上一页
                    direct=-1;
                    displayPage();
                });
                $("#btn3").click(function nextPage(){    // 下一页
                    direct=1;
                    displayPage();
                });
                $("#btn4").click(function lastPage(){    // 尾页
                    curPage=page;
                    direct = 0;
                    displayPage();
                });
                $("#btn5").click(function changePage(){    // 转页
                    curPage=document.getElementById("changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (curPage > page) {
                        alert("超出数据页面");
                        return ;
                    }
                    direct = 0;
                    displayPage();
                });
               
                $("#pageSizeSet").click(function setPageSize(){    // 设置每页显示多少条记录
                    pageSize = document.getElementById("pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(pageSize)) {
                        alert("请输入正整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       len =$("#tbody_review tr").length;
                    page=len % pageSize==0 ? len/pageSize : Math.floor(len/pageSize)+1;//根据记录条数，计算页数
                    curPage=1;        //当前页
                    direct=0;        //方向
                                       displayPage();//显示第一页
                });
            });

            function displayPage(){
                if(curPage <=1 && direct==-1){
                    direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (curPage >= page && direct==1) {
                    direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                lastPage = curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (len > pageSize) {
                    //curPage = ((curPage + direct + len) % len);
                                        if (pageSize!=1) {
                                            curPage = ((curPage + direct + len) % len);
                                        } else {
                                            curPage = curPage + direct;
                                        }
                } else {
                    curPage = 1;
                }

                document.getElementById("btn0").innerHTML="当前 " + curPage + "/" + page + " 页    每页 ";        // 显示当前多少页

                begin=(curPage-1)*pageSize;// 起始记录号
                end = begin + 1*pageSize - 1;    // 末尾记录号
                              
                if(end > len ) end=len;
                $("#tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#tbody_review tr").each(function(i){    // 然后，通过条件判断决定本行是否恢复显示
                   if(i>=begin && i<=end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                          function resub() {
                              for (var i = 1; i < len+1; i++) {
                                  $('#review_submit' + i).on('click', function () {
                                      //询问框
                                      layer.confirm('您确定不查看详细信息就直接审核通过吗？', {
                                          btn: ['取消', '确认'] //按钮
                                      }, function () {
                                          layer.msg('您已经取消！', {icon: 1});
                                      }, function () {
                                          layer.msg('样本审核通过！', {
                                              time: 15000, //15s后自动关闭
                                              btn: [ '好的，我知道了！']
                                          });
                                      });
                                  });
                              }
                          }

                    </script>

                    </table>

                  </div>

                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivDNAExtAss">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>DNA提取任务已分派 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                  <div style="width: 20%">
                      <form name="Searchform_DNAExtAss">
                          <input type="text" id="Searchval_DNAExtAss" name="Searchval_DNAExtAss" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_DNAExtAss","pass_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">

					<a id="pass_btn0"></a>
                    <input id="pass_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="pass_pageSizeSet">设置</a> 
                    <a id="pass_sjzl"></a> 
                    <a href="#" id="pass_btn1">首页</a>
                    <a href="#" id="pass_btn2">上一页</a>
                    <a href="#" id="pass_btn3">下一页</a>
                    <a href="#" id="pass_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="pass_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="pass_btn5">跳转</a><p></p>
                    <table id="pass_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>采血管类型</th>
                          <th>分离后血浆管数</th>
                          <th>血浆体积(mL)</th>
                          <th>白细胞管数</th>
                          <th>白细胞体积(mL)</th>
                          <th>任务接收者</th>
                          <th>任务进度</th>
                          <th>任务派送时间</th>
                          <th>操作</th>

                        </tr>
                      </thead>

                       <tbody id="pass_tbody_review">
                        {%  for data in DNA_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/DNAExtract_taskToExamineDetermine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Types_of_blood_vessel }}<input type="hidden" value = "{{ data.Types_of_blood_vessel }}"/></td>
                                <td>{{ data.number_of_plasma }}<input type="hidden" value = "{{ data.number_of_plasma }}"/></td>
                                <td>{{ data.Plasma_volume }}<input type="hidden" value = "{{ data.Plasma_volume }}"/></td>
                                <td>{{ data.number_of_white_blood_cells }}<input type="hidden" value = "{{ data.number_of_white_blood_cells }}"/></td>
                                <td>{{ data.Leukocyte_volume }}<input type="hidden" value = "{{ data.Leukocyte_volume }}"/></td>
                                <td>{{ data.Next_TaskProgress_Man }}<input type="hidden" value = "{{ data.Next_TaskProgress_Man }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time }}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info" name="DNA_audited">查看信息</button>
                                    <button type="submit" class="label label-info" style="display: none; background: #6ebe9a" id="DNA_audited_ModifyData{{ data.id }}" name="ModifyData">修改信息</button>
                                </td>
                                <script type="text/javascript">
                                    if(document.getElementById("IP_department").value=="管理员"){
                                        document.getElementById("DNA_audited_ModifyData"+{{ data.id }}).style.display="";
                                    }
                                </script>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var pass_pageSize = 5;    //每页显示的记录条数
               var pass_curPage=0;        //当前页
               var pass_lastPage;        //最后页
                var pass_direct=0;        //方向
               var pass_len;            //总行数
               var pass_page;            //总页数
               var pass_begin;
               var pass_end;
               
               $(document).ready(function pass_display(){  
                pass_len =$("#pass_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                pass_page=pass_len % pass_pageSize==0 ? pass_len/pass_pageSize : Math.floor(pass_len/pass_pageSize)+1;//根据记录条数，计算页数
                pass_curPage=1;    // 设置当前为第一页
                pass_displayPage(1);//显示第一页

                document.getElementById("pass_btn0").innerHTML="当前 " + pass_curPage + "/" + pass_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("pass_sjzl").innerHTML="数据总量 " + pass_len + "条";        // 显示数据量
                document.getElementById("pass_pageSize").value = pass_pageSize;        

                $("#pass_btn1").click(function pass_firstPage(){    // 首页
                    pass_curPage=1;
                    pass_direct = 0;
                    pass_displayPage();
                });
                $("#pass_btn2").click(function pass_frontPage(){    // 上一页
                    pass_direct=-1;
                    pass_displayPage();
                });
                $("#pass_btn3").click(function pass_nextPage(){    // 下一页
                    pass_direct=1;
                    pass_displayPage();
                });
                $("#pass_btn4").click(function pass_lastPage(){    // 尾页
                    pass_curPage=pass_page;
                    pass_direct = 0;
                    pass_displayPage();
                });
                $("#pass_btn5").click(function pass_changePage(){    // 转页
                    pass_curPage=document.getElementById("pass_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(pass_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (pass_curPage > pass_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    pass_direct = 0;
                    pass_displayPage();
                });
               
                $("#pass_pageSizeSet").click(function pass_setPageSize(){    // 设置每页显示多少条记录
                    pass_pageSize = document.getElementById("pass_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(pass_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       pass_len =$("#pass_tbody_review tr").length;
                    pass_page=pass_len % pass_pageSize==0 ? pass_len/pass_pageSize : Math.floor(pass_len/pass_pageSize)+1;//根据记录条数，计算页数
                    pass_curPage=1;        //当前页
                    pass_direct=0;        //方向
                                       pass_displayPage();//显示第一页
                });
            });

            function pass_displayPage(){
                if(pass_curPage <=1 && pass_direct==-1){
                    pass_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (pass_curPage >= pass_page && pass_direct==1) {
                    pass_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                pass_lastPage = pass_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (pass_len > pass_pageSize) {
                                        if (pass_pageSize!=1) {
                                            pass_curPage = ((pass_curPage + pass_direct + pass_len) % pass_len);
                                        } else {
                                            pass_curPage = pass_curPage + pass_direct;
                                        }
                } else {
                    pass_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("pass_btn0").innerHTML="当前 " + pass_curPage + "/" + pass_page + " 页    每页 ";        // 显示当前多少页

                pass_begin=(pass_curPage-1)*pass_pageSize;// 起始记录号
                pass_end = pass_begin + 1*pass_pageSize - 1;    // 末尾记录号
                              
                if(pass_end > pass_len ) pass_end=pass_len;
                $("#pass_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#pass_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=pass_begin && x<=pass_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivPreLibCon">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>预文库构建任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

                <div style="width: 20%">
                      <form name="Searchform_PreLibCon">
                          <input type="text" id="Searchval_PreLibCon" name="Searchval_PreLibCon" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_PreLibCon","PreLibCon_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">

					<a id="PreLibCon_btn0"></a>
                    <input id="PreLibCon_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="PreLibCon_pageSizeSet">设置</a> 
                    <a id="PreLibCon_sjzl"></a> 
                    <a href="#" id="PreLibCon_btn1">首页</a>
                    <a href="#" id="PreLibCon_btn2">上一页</a>
                    <a href="#" id="PreLibCon_btn3">下一页</a>
                    <a href="#" id="PreLibCon_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="PreLibCon_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="PreLibCon_btn5">跳转</a><p></p>
                    <table id="PreLibCon_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>DNA浓度(ng/µL)</th>
                          <th>DNA体积(µL)</th>
                          <th>DNA总量(ng)</th>
                          <th>质检方法</th>
                          <th>质检结果</th>
                          <th>DNA提取人</th>
                          <th>提取时间</th>
                          <th>实验次数</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="PreLibCon_tbody_review">
                        {%  for data in PreLibCon_not_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/PreLibCon_taskToExamine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.DNA_Concentration }}<input type="hidden" value = "{{ data.DNA_Concentration }}"/></td>
                                <td>{{ data.DNA_volume }}<input type="hidden" value = "{{ data.DNA_volume }}"/></td>
                                <td>{{ data.DNA_Total }}<input type="hidden" value = "{{ data.DNA_Total }}"/></td>
                                <td>{{ data.Quality_inspection_method }}<input type="hidden" value = "{{ data.Quality_inspection_method }}"/></td>
                                <td>{{ data.Quality_inspection_result }}<input type="hidden" value = "{{ data.Quality_inspection_result }}"/></td>
                                <td>{{ data.DNA_extraction_people }}<input type="hidden" value = "{{ data.DNA_extraction_people }}"/></td>
                                <td>{{ data.DNA_extraction_time }}<input type="hidden" value = "{{ data.DNA_extraction_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="DNA_extraction_num" name="DNA_extraction_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var PreLibCon_pageSize = 5;    //每页显示的记录条数
               var PreLibCon_curPage=0;        //当前页
               var PreLibCon_lastPage;        //最后页
                var PreLibCon_direct=0;        //方向
               var PreLibCon_len;            //总行数
               var PreLibCon_page;            //总页数
               var PreLibCon_begin;
               var PreLibCon_end;
               
               $(document).ready(function PreLibCon_display(){  
                PreLibCon_len =$("#PreLibCon_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                PreLibCon_page=PreLibCon_len % PreLibCon_pageSize==0 ? PreLibCon_len/PreLibCon_pageSize : Math.floor(PreLibCon_len/PreLibCon_pageSize)+1;//根据记录条数，计算页数
                PreLibCon_curPage=1;    // 设置当前为第一页
                PreLibCon_displayPage(1);//显示第一页

                document.getElementById("PreLibCon_btn0").innerHTML="当前 " + PreLibCon_curPage + "/" + PreLibCon_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("PreLibCon_sjzl").innerHTML="数据总量 " + PreLibCon_len + "条";        // 显示数据量
                document.getElementById("PreLibCon_pageSize").value = PreLibCon_pageSize;        

                $("#PreLibCon_btn1").click(function PreLibCon_firstPage(){    // 首页
                    PreLibCon_curPage=1;
                    PreLibCon_direct = 0;
                    PreLibCon_displayPage();
                });
                $("#PreLibCon_btn2").click(function PreLibCon_frontPage(){    // 上一页
                    PreLibCon_direct=-1;
                    PreLibCon_displayPage();
                });
                $("#PreLibCon_btn3").click(function PreLibCon_nextPage(){    // 下一页
                    PreLibCon_direct=1;
                    PreLibCon_displayPage();
                });
                $("#PreLibCon_btn4").click(function PreLibCon_lastPage(){    // 尾页
                    PreLibCon_curPage=PreLibCon_page;
                    PreLibCon_direct = 0;
                    PreLibCon_displayPage();
                });
                $("#PreLibCon_btn5").click(function PreLibCon_changePage(){    // 转页
                    PreLibCon_curPage=document.getElementById("PreLibCon_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(PreLibCon_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (PreLibCon_curPage > PreLibCon_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    PreLibCon_direct = 0;
                    PreLibCon_displayPage();
                });
               
                $("#PreLibCon_pageSizeSet").click(function PreLibCon_setPageSize(){    // 设置每页显示多少条记录
                    PreLibCon_pageSize = document.getElementById("PreLibCon_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(PreLibCon_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       PreLibCon_len =$("#PreLibCon_tbody_review tr").length;
                    PreLibCon_page=PreLibCon_len % PreLibCon_pageSize==0 ? PreLibCon_len/PreLibCon_pageSize : Math.floor(PreLibCon_len/PreLibCon_pageSize)+1;//根据记录条数，计算页数
                    PreLibCon_curPage=1;        //当前页
                    PreLibCon_direct=0;        //方向
                                       PreLibCon_displayPage();//显示第一页
                });
            });

            function PreLibCon_displayPage(){
                if(PreLibCon_curPage <=1 && PreLibCon_direct==-1){
                    PreLibCon_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (PreLibCon_curPage >= PreLibCon_page && PreLibCon_direct==1) {
                    PreLibCon_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                PreLibCon_lastPage = PreLibCon_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (PreLibCon_len > PreLibCon_pageSize) {
                                        if (PreLibCon_pageSize!=1) {
                                            PreLibCon_curPage = ((PreLibCon_curPage + PreLibCon_direct + PreLibCon_len) % PreLibCon_len);
                                        } else {
                                            PreLibCon_curPage = PreLibCon_curPage + PreLibCon_direct;
                                        }
                } else {
                    PreLibCon_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("PreLibCon_btn0").innerHTML="当前 " + PreLibCon_curPage + "/" + PreLibCon_page + " 页    每页 ";        // 显示当前多少页

                PreLibCon_begin=(PreLibCon_curPage-1)*PreLibCon_pageSize;// 起始记录号
                PreLibCon_end = PreLibCon_begin + 1*PreLibCon_pageSize - 1;    // 末尾记录号
                              
                if(PreLibCon_end > PreLibCon_len ) PreLibCon_end=PreLibCon_len;
                $("#PreLibCon_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#PreLibCon_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=PreLibCon_begin && x<=PreLibCon_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivPreLibConAss">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>预文库构建任务已分派 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_PreLibConAss">
                          <input type="text" id="Searchval_PreLibConAss" name="Searchval_PreLibConAss" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_PreLibConAss","PreLibConAss_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="PreLibConAss_btn0"></a>
                    <input id="PreLibConAss_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="PreLibConAss_pageSizeSet">设置</a> 
                    <a id="PreLibConAss_sjzl"></a> 
                    <a href="#" id="PreLibConAss_btn1">首页</a>
                    <a href="#" id="PreLibConAss_btn2">上一页</a>
                    <a href="#" id="PreLibConAss_btn3">下一页</a>
                    <a href="#" id="PreLibConAss_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="PreLibConAss_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="PreLibConAss_btn5">跳转</a><p></p>
                    <table id="PreLibConAss_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                       <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>DNA提取人</th>
                          <th>提取时间</th>
                          <th>DNA提取实验次数</th>
                          <th>任务接收者</th>
                          <th>任务进度</th>
                          <th>任务派送时间</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="PreLibConAss_tbody_review">
                        {%  for data in PreLibCon_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/PreLibCon_taskToExamineDetermine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.DNA_extraction_people }}<input type="hidden" value = "{{ data.DNA_extraction_people }}"/></td>
                                <td>{{ data.DNA_extraction_time }}<input type="hidden" value = "{{ data.DNA_extraction_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="DNA_extraction_num" name="DNA_extraction_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>{{ data.Next_TaskProgress_Man }}<input type="hidden" value = "{{ data.Next_TaskProgress_Man }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time}}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info" name="PreLibCon_audited">查看信息</button>
                                    <button type="submit" class="label label-info" style="display: none; background: #6ebe9a" id="PreLibCon_audited_ModifyData{{ data.id }}" name="ModifyData">修改信息</button>
                                </td>
                                <script type="text/javascript">
                                    if(document.getElementById("IP_department").value=="管理员"){
                                        document.getElementById("PreLibCon_audited_ModifyData"+{{ data.id }}).style.display="";
                                    }
                                </script>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var PreLibConAss_pageSize = 5;    //每页显示的记录条数
               var PreLibConAss_curPage=0;        //当前页
               var PreLibConAss_lastPage;        //最后页
                var PreLibConAss_direct=0;        //方向
               var PreLibConAss_len;            //总行数
               var PreLibConAss_page;            //总页数
               var PreLibConAss_begin;
               var PreLibConAss_end;
               
               $(document).ready(function PreLibConAss_display(){  
                PreLibConAss_len =$("#PreLibConAss_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                PreLibConAss_page=PreLibConAss_len % PreLibConAss_pageSize==0 ? PreLibConAss_len/PreLibConAss_pageSize : Math.floor(PreLibConAss_len/PreLibConAss_pageSize)+1;//根据记录条数，计算页数
                PreLibConAss_curPage=1;    // 设置当前为第一页
                PreLibConAss_displayPage(1);//显示第一页
                document.getElementById("PreLibConAss_btn0").innerHTML="当前 " + PreLibConAss_curPage + "/" + PreLibConAss_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("PreLibConAss_sjzl").innerHTML="数据总量 " + PreLibConAss_len + "条";        // 显示数据量
                document.getElementById("PreLibConAss_pageSize").value = PreLibConAss_pageSize;        

                $("#PreLibConAss_btn1").click(function PreLibConAss_firstPage(){    // 首页
                    PreLibConAss_curPage=1;
                    PreLibConAss_direct = 0;
                    PreLibConAss_displayPage();
                });
                $("#PreLibConAss_btn2").click(function PreLibConAss_frontPage(){    // 上一页
                    PreLibConAss_direct=-1;
                    PreLibConAss_displayPage();
                });
                $("#PreLibConAss_btn3").click(function PreLibConAss_nextPage(){    // 下一页
                    PreLibConAss_direct=1;
                    PreLibConAss_displayPage();
                });
                $("#PreLibConAss_btn4").click(function PreLibConAss_lastPage(){    // 尾页
                    PreLibConAss_curPage=PreLibConAss_page;
                    PreLibConAss_direct = 0;
                    PreLibConAss_displayPage();
                });
                $("#PreLibConAss_btn5").click(function PreLibConAss_changePage(){    // 转页
                    PreLibConAss_curPage=document.getElementById("PreLibConAss_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(PreLibConAss_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (PreLibConAss_curPage > PreLibConAss_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    PreLibConAss_direct = 0;
                    PreLibConAss_displayPage();
                });
               
                $("#PreLibConAss_pageSizeSet").click(function PreLibConAss_setPageSize(){    // 设置每页显示多少条记录
                    PreLibConAss_pageSize = document.getElementById("PreLibConAss_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(PreLibConAss_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       PreLibConAss_len =$("#PreLibConAss_tbody_review tr").length;
                    PreLibConAss_page=PreLibConAss_len % PreLibConAss_pageSize==0 ? PreLibConAss_len/PreLibConAss_pageSize : Math.floor(PreLibConAss_len/PreLibConAss_pageSize)+1;//根据记录条数，计算页数
                    PreLibConAss_curPage=1;        //当前页
                    PreLibConAss_direct=0;        //方向
                                       PreLibConAss_displayPage();//显示第一页
                });
            });

            function PreLibConAss_displayPage(){
                if(PreLibConAss_curPage <=1 && PreLibConAss_direct==-1){
                    PreLibConAss_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (PreLibConAss_curPage >= PreLibConAss_page && PreLibConAss_direct==1) {
                    PreLibConAss_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                PreLibConAss_lastPage = PreLibConAss_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (PreLibConAss_len > PreLibConAss_pageSize) {
                                        if (PreLibConAss_pageSize!=1) {
                                            PreLibConAss_curPage = ((PreLibConAss_curPage + PreLibConAss_direct + PreLibConAss_len) % PreLibConAss_len);
                                        } else {
                                            PreLibConAss_curPage = PreLibConAss_curPage + PreLibConAss_direct;
                                        }
                } else {
                    PreLibConAss_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("PreLibConAss_btn0").innerHTML="当前 " + PreLibConAss_curPage + "/" + PreLibConAss_page + " 页    每页 ";        // 显示当前多少页

                PreLibConAss_begin=(PreLibConAss_curPage-1)*PreLibConAss_pageSize;// 起始记录号
                PreLibConAss_end = PreLibConAss_begin + 1*PreLibConAss_pageSize - 1;    // 末尾记录号
                              
                if(PreLibConAss_end > PreLibConAss_len ) PreLibConAss_end=PreLibConAss_len;
                $("#PreLibConAss_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#PreLibConAss_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=PreLibConAss_begin && x<=PreLibConAss_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivFinLibCon">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>终文库构建任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_FinLibCon">
                          <input type="text" id="Searchval_FinLibCon" name="Searchval_FinLibCon" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_FinLibCon","FinLibCon_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="FinLibCon_btn0"></a>
                    <input id="FinLibCon_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="FinLibCon_pageSizeSet">设置</a> 
                    <a id="FinLibCon_sjzl"></a> 
                    <a href="#" id="FinLibCon_btn1">首页</a>
                    <a href="#" id="FinLibCon_btn2">上一页</a>
                    <a href="#" id="FinLibCon_btn3">下一页</a>
                    <a href="#" id="FinLibCon_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="FinLibCon_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="FinLibCon_btn5">跳转</a><p></p>
                    <table id="FinLibCon_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>DNA浓度(ng/µL)</th>
                          <th>DNA体积(µL)</th>
                          <th>DNA总量(ng)</th>
                          <th>质检方法</th>
                          <th>质检结果</th>
                          <th>建库人</th>
                          <th>建库时间</th>
                          <th>预文库构建次数</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="FinLibCon_tbody_review">
                        {%  for data in FinLibCon_not_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/FinLibCon_taskToExamine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.DNA_Concentration }}<input type="hidden" value = "{{ data.DNA_Concentration }}"/></td>
                                <td>{{ data.DNA_volume }}<input type="hidden" value = "{{ data.DNA_volume }}"/></td>
                                <td>{{ data.DNA_Total }}<input type="hidden" value = "{{ data.DNA_Total }}"/></td>
                                <td>{{ data.Quality_inspection_method }}<input type="hidden" value = "{{ data.Quality_inspection_method }}"/></td>
                                <td>{{ data.Quality_inspection_result }}<input type="hidden" value = "{{ data.Quality_inspection_result }}"/></td>
                                <td>{{ data.Build_lib_man }}<input type="hidden" value = "{{ data.Build_lib_man }}"/></td>
                                <td>{{ data.Build_lib_time }}<input type="hidden" value = "{{ data.Build_lib_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="Build_lib_num" name="Build_lib_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var FinLibCon_pageSize = 5;    //每页显示的记录条数
               var FinLibCon_curPage=0;        //当前页
               var FinLibCon_lastPage;        //最后页
                var FinLibCon_direct=0;        //方向
               var FinLibCon_len;            //总行数
               var FinLibCon_page;            //总页数
               var FinLibCon_begin;
               var FinLibCon_end;
               
               $(document).ready(function FinLibCon_display(){  
                FinLibCon_len =$("#FinLibCon_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                FinLibCon_page=FinLibCon_len % FinLibCon_pageSize==0 ? FinLibCon_len/FinLibCon_pageSize : Math.floor(FinLibCon_len/FinLibCon_pageSize)+1;//根据记录条数，计算页数
                FinLibCon_curPage=1;    // 设置当前为第一页
                FinLibCon_displayPage(1);//显示第一页

                document.getElementById("FinLibCon_btn0").innerHTML="当前 " + FinLibCon_curPage + "/" + FinLibCon_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("FinLibCon_sjzl").innerHTML="数据总量 " + FinLibCon_len + "条";        // 显示数据量
                document.getElementById("FinLibCon_pageSize").value = FinLibCon_pageSize;        

                $("#FinLibCon_btn1").click(function FinLibCon_firstPage(){    // 首页
                    FinLibCon_curPage=1;
                    FinLibCon_direct = 0;
                    FinLibCon_displayPage();
                });
                $("#FinLibCon_btn2").click(function FinLibCon_frontPage(){    // 上一页
                    FinLibCon_direct=-1;
                    FinLibCon_displayPage();
                });
                $("#FinLibCon_btn3").click(function FinLibCon_nextPage(){    // 下一页
                    FinLibCon_direct=1;
                    FinLibCon_displayPage();
                });
                $("#FinLibCon_btn4").click(function FinLibCon_lastPage(){    // 尾页
                    FinLibCon_curPage=FinLibCon_page;
                    FinLibCon_direct = 0;
                    FinLibCon_displayPage();
                });
                $("#FinLibCon_btn5").click(function FinLibCon_changePage(){    // 转页
                    FinLibCon_curPage=document.getElementById("FinLibCon_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(FinLibCon_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (FinLibCon_curPage > FinLibCon_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    FinLibCon_direct = 0;
                    FinLibCon_displayPage();
                });
               
                $("#FinLibCon_pageSizeSet").click(function FinLibCon_setPageSize(){    // 设置每页显示多少条记录
                    FinLibCon_pageSize = document.getElementById("FinLibCon_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(FinLibCon_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       FinLibCon_len =$("#FinLibCon_tbody_review tr").length;
                    FinLibCon_page=FinLibCon_len % FinLibCon_pageSize==0 ? FinLibCon_len/FinLibCon_pageSize : Math.floor(FinLibCon_len/FinLibCon_pageSize)+1;//根据记录条数，计算页数
                    FinLibCon_curPage=1;        //当前页
                    FinLibCon_direct=0;        //方向
                                       FinLibCon_displayPage();//显示第一页
                });
            });

            function FinLibCon_displayPage(){
                if(FinLibCon_curPage <=1 && FinLibCon_direct==-1){
                    FinLibCon_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (FinLibCon_curPage >= FinLibCon_page && FinLibCon_direct==1) {
                    FinLibCon_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                FinLibCon_lastPage = FinLibCon_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (FinLibCon_len > FinLibCon_pageSize) {
                                        if (FinLibCon_pageSize!=1) {
                                            FinLibCon_curPage = ((FinLibCon_curPage + FinLibCon_direct + FinLibCon_len) % FinLibCon_len);
                                        } else {
                                            FinLibCon_curPage = FinLibCon_curPage + FinLibCon_direct;
                                        }
                } else {
                    FinLibCon_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("FinLibCon_btn0").innerHTML="当前 " + FinLibCon_curPage + "/" + FinLibCon_page + " 页    每页 ";        // 显示当前多少页

                FinLibCon_begin=(FinLibCon_curPage-1)*FinLibCon_pageSize;// 起始记录号
                FinLibCon_end = FinLibCon_begin + 1*FinLibCon_pageSize - 1;    // 末尾记录号
                              
                if(FinLibCon_end > FinLibCon_len ) FinLibCon_end=FinLibCon_len;
                $("#FinLibCon_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#FinLibCon_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=FinLibCon_begin && x<=FinLibCon_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivFinLibConAss">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>终文库构建任务已分派 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_FinLibConAss">
                          <input type="text" id="Searchval_FinLibConAss" name="Searchval_FinLibConAss" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_FinLibConAss","FinLibConAss_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="FinLibConAss_btn0"></a>
                    <input id="FinLibConAss_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="FinLibConAss_pageSizeSet">设置</a> 
                    <a id="FinLibConAss_sjzl"></a> 
                    <a href="#" id="FinLibConAss_btn1">首页</a>
                    <a href="#" id="FinLibConAss_btn2">上一页</a>
                    <a href="#" id="FinLibConAss_btn3">下一页</a>
                    <a href="#" id="FinLibConAss_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="FinLibConAss_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="FinLibConAss_btn5">跳转</a><p></p>
                    <table id="FinLibConAss_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>建库方法</th>
                          <th>建库人</th>
                          <th>建库时间</th>
                          <th>预文库构建实验次数</th>
                          <th>任务接收者</th>
                          <th>任务进度</th>
                          <th>任务派送时间</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="FinLibConAss_tbody_review">
                        {%  for data in FinLibCon_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/FinLibCon_taskToExamineDetermine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Build_lib_method }}<input type="hidden" value = "{{ data.Build_lib_method }}"/></td>
                                <td>{{ data.Build_lib_man }}<input type="hidden" value = "{{ data.Build_lib_man }}"/></td>
                                <td>{{ data.Build_lib_time }}<input type="hidden" value = "{{ data.Build_lib_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="Build_lib_num" name="Build_lib_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>{{ data.Next_TaskProgress_Man }}<input type="hidden" value = "{{ data.Next_TaskProgress_Man }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time}}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info" name="FinLibCon_audited">查看信息</button>
                                    <button type="submit" class="label label-info" style="display: none; background: #6ebe9a" id="FinLibCon_audited_ModifyData{{ data.id }}" name="ModifyData">修改信息</button>
                                </td>
                                <script type="text/javascript">
                                    if(document.getElementById("IP_department").value=="管理员"){
                                        document.getElementById("FinLibCon_audited_ModifyData"+{{ data.id }}).style.display="";
                                    }
                                </script>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var FinLibConAss_pageSize = 5;    //每页显示的记录条数
               var FinLibConAss_curPage=0;        //当前页
               var FinLibConAss_lastPage;        //最后页
                var FinLibConAss_direct=0;        //方向
               var FinLibConAss_len;            //总行数
               var FinLibConAss_page;            //总页数
               var FinLibConAss_begin;
               var FinLibConAss_end;
               
               $(document).ready(function FinLibConAss_display(){  
                FinLibConAss_len =$("#FinLibConAss_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                FinLibConAss_page=FinLibConAss_len % FinLibConAss_pageSize==0 ? FinLibConAss_len/FinLibConAss_pageSize : Math.floor(FinLibConAss_len/FinLibConAss_pageSize)+1;//根据记录条数，计算页数
                FinLibConAss_curPage=1;    // 设置当前为第一页
                FinLibConAss_displayPage(1);//显示第一页
                document.getElementById("FinLibConAss_btn0").innerHTML="当前 " + FinLibConAss_curPage + "/" + FinLibConAss_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("FinLibConAss_sjzl").innerHTML="数据总量 " + FinLibConAss_len + "条";        // 显示数据量
                document.getElementById("FinLibConAss_pageSize").value = FinLibConAss_pageSize;        

                $("#FinLibConAss_btn1").click(function FinLibConAss_firstPage(){    // 首页
                    FinLibConAss_curPage=1;
                    FinLibConAss_direct = 0;
                    FinLibConAss_displayPage();
                });
                $("#FinLibConAss_btn2").click(function FinLibConAss_frontPage(){    // 上一页
                    FinLibConAss_direct=-1;
                    FinLibConAss_displayPage();
                });
                $("#FinLibConAss_btn3").click(function FinLibConAss_nextPage(){    // 下一页
                    FinLibConAss_direct=1;
                    FinLibConAss_displayPage();
                });
                $("#FinLibConAss_btn4").click(function FinLibConAss_lastPage(){    // 尾页
                    FinLibConAss_curPage=FinLibConAss_page;
                    FinLibConAss_direct = 0;
                    FinLibConAss_displayPage();
                });
                $("#FinLibConAss_btn5").click(function FinLibConAss_changePage(){    // 转页
                    FinLibConAss_curPage=document.getElementById("FinLibConAss_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(FinLibConAss_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (FinLibConAss_curPage > FinLibConAss_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    FinLibConAss_direct = 0;
                    FinLibConAss_displayPage();
                });
               
                $("#FinLibConAss_pageSizeSet").click(function FinLibConAss_setPageSize(){    // 设置每页显示多少条记录
                    FinLibConAss_pageSize = document.getElementById("FinLibConAss_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(FinLibConAss_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       FinLibConAss_len =$("#FinLibConAss_tbody_review tr").length;
                    FinLibConAss_page=FinLibConAss_len % FinLibConAss_pageSize==0 ? FinLibConAss_len/FinLibConAss_pageSize : Math.floor(FinLibConAss_len/FinLibConAss_pageSize)+1;//根据记录条数，计算页数
                    FinLibConAss_curPage=1;        //当前页
                    FinLibConAss_direct=0;        //方向
                                       FinLibConAss_displayPage();//显示第一页
                });
            });

            function FinLibConAss_displayPage(){
                if(FinLibConAss_curPage <=1 && FinLibConAss_direct==-1){
                    FinLibConAss_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (FinLibConAss_curPage >= FinLibConAss_page && FinLibConAss_direct==1) {
                    FinLibConAss_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                FinLibConAss_lastPage = FinLibConAss_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (FinLibConAss_len > FinLibConAss_pageSize) {
                                        if (FinLibConAss_pageSize!=1) {
                                            FinLibConAss_curPage = ((FinLibConAss_curPage + FinLibConAss_direct + FinLibConAss_len) % FinLibConAss_len);
                                        } else {
                                            FinLibConAss_curPage = FinLibConAss_curPage + FinLibConAss_direct;
                                        }
                } else {
                    FinLibConAss_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("FinLibConAss_btn0").innerHTML="当前 " + FinLibConAss_curPage + "/" + FinLibConAss_page + " 页    每页 ";        // 显示当前多少页

                FinLibConAss_begin=(FinLibConAss_curPage-1)*FinLibConAss_pageSize;// 起始记录号
                FinLibConAss_end = FinLibConAss_begin + 1*FinLibConAss_pageSize - 1;    // 末尾记录号
                              
                if(FinLibConAss_end > FinLibConAss_len ) FinLibConAss_end=FinLibConAss_len;
                $("#FinLibConAss_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#FinLibConAss_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=FinLibConAss_begin && x<=FinLibConAss_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivComputerSeq">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>上机测序任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_ComputerSeq">
                          <input type="text" id="Searchval_ComputerSeq" name="Searchval_ComputerSeq" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_ComputerSeq","ComputerSeq_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="ComputerSeq_btn0"></a>
                    <input id="ComputerSeq_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="ComputerSeq_pageSizeSet">设置</a> 
                    <a id="ComputerSeq_sjzl"></a> 
                    <a href="#" id="ComputerSeq_btn1">首页</a>
                    <a href="#" id="ComputerSeq_btn2">上一页</a>
                    <a href="#" id="ComputerSeq_btn3">下一页</a>
                    <a href="#" id="ComputerSeq_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="ComputerSeq_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="ComputerSeq_btn5">跳转</a><p></p>
                    <table id="ComputerSeq_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>终文库名称</th>
                          <th>浓度(µL)</th>
                          <th>体积(µL)</th>
                          <th>总量(ng)</th>
                          <th>质检方法</th>
                          <th>质检结果</th>
                          <th>建库人</th>
                          <th>建库时间</th>
                          <th>终文库构建次数</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="ComputerSeq_tbody_review">
                        {%  for data in ComputerSeq_not_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/ComputerSeq_taskToExamine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.FinLibConName }}<input type="hidden" value = "{{ data.FinLibConName }}"/></td>
                                <td>{{ data.DNA_Concentration }}<input type="hidden" value = "{{ data.DNA_Concentration }}"/></td>
                                <td>{{ data.DNA_volume }}<input type="hidden" value = "{{ data.DNA_volume }}"/></td>
                                <td>{{ data.DNA_Total }}<input type="hidden" value = "{{ data.DNA_Total }}"/></td>
                                <td>{{ data.Quality_inspection_method }}<input type="hidden" value = "{{ data.Quality_inspection_method }}"/></td>
                                <td>{{ data.Quality_inspection_result }}<input type="hidden" value = "{{ data.Quality_inspection_result }}"/></td>
                                <td>{{ data.Build_lib_man }}<input type="hidden" value = "{{ data.Build_lib_man }}"/></td>
                                <td>{{ data.Build_lib_time }}<input type="hidden" value = "{{ data.Build_lib_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="Build_finlib_num" name="Build_finlib_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var ComputerSeq_pageSize = 5;    //每页显示的记录条数
               var ComputerSeq_curPage=0;        //当前页
               var ComputerSeq_lastPage;        //最后页
                var ComputerSeq_direct=0;        //方向
               var ComputerSeq_len;            //总行数
               var ComputerSeq_page;            //总页数
               var ComputerSeq_begin;
               var ComputerSeq_end;
               
               $(document).ready(function ComputerSeq_display(){  
                ComputerSeq_len =$("#ComputerSeq_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                ComputerSeq_page=ComputerSeq_len % ComputerSeq_pageSize==0 ? ComputerSeq_len/ComputerSeq_pageSize : Math.floor(ComputerSeq_len/ComputerSeq_pageSize)+1;//根据记录条数，计算页数
                ComputerSeq_curPage=1;    // 设置当前为第一页
                ComputerSeq_displayPage(1);//显示第一页

                document.getElementById("ComputerSeq_btn0").innerHTML="当前 " + ComputerSeq_curPage + "/" + ComputerSeq_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("ComputerSeq_sjzl").innerHTML="数据总量 " + ComputerSeq_len + "条";        // 显示数据量
                document.getElementById("ComputerSeq_pageSize").value = ComputerSeq_pageSize;        

                $("#ComputerSeq_btn1").click(function ComputerSeq_firstPage(){    // 首页
                    ComputerSeq_curPage=1;
                    ComputerSeq_direct = 0;
                    ComputerSeq_displayPage();
                });
                $("#ComputerSeq_btn2").click(function ComputerSeq_frontPage(){    // 上一页
                    ComputerSeq_direct=-1;
                    ComputerSeq_displayPage();
                });
                $("#ComputerSeq_btn3").click(function ComputerSeq_nextPage(){    // 下一页
                    ComputerSeq_direct=1;
                    ComputerSeq_displayPage();
                });
                $("#ComputerSeq_btn4").click(function ComputerSeq_lastPage(){    // 尾页
                    ComputerSeq_curPage=ComputerSeq_page;
                    ComputerSeq_direct = 0;
                    ComputerSeq_displayPage();
                });
                $("#ComputerSeq_btn5").click(function ComputerSeq_changePage(){    // 转页
                    ComputerSeq_curPage=document.getElementById("ComputerSeq_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(ComputerSeq_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (ComputerSeq_curPage > ComputerSeq_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    ComputerSeq_direct = 0;
                    ComputerSeq_displayPage();
                });
               
                $("#ComputerSeq_pageSizeSet").click(function ComputerSeq_setPageSize(){    // 设置每页显示多少条记录
                    ComputerSeq_pageSize = document.getElementById("ComputerSeq_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(ComputerSeq_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       ComputerSeq_len =$("#ComputerSeq_tbody_review tr").length;
                    ComputerSeq_page=ComputerSeq_len % ComputerSeq_pageSize==0 ? ComputerSeq_len/ComputerSeq_pageSize : Math.floor(ComputerSeq_len/ComputerSeq_pageSize)+1;//根据记录条数，计算页数
                    ComputerSeq_curPage=1;        //当前页
                    ComputerSeq_direct=0;        //方向
                                       ComputerSeq_displayPage();//显示第一页
                });
            });

            function ComputerSeq_displayPage(){
                if(ComputerSeq_curPage <=1 && ComputerSeq_direct==-1){
                    ComputerSeq_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (ComputerSeq_curPage >= ComputerSeq_page && ComputerSeq_direct==1) {
                    ComputerSeq_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                ComputerSeq_lastPage = ComputerSeq_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (ComputerSeq_len > ComputerSeq_pageSize) {
                                        if (ComputerSeq_pageSize!=1) {
                                            ComputerSeq_curPage = ((ComputerSeq_curPage + ComputerSeq_direct + ComputerSeq_len) % ComputerSeq_len);
                                        } else {
                                            ComputerSeq_curPage = ComputerSeq_curPage + ComputerSeq_direct;
                                        }
                } else {
                    ComputerSeq_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("ComputerSeq_btn0").innerHTML="当前 " + ComputerSeq_curPage + "/" + ComputerSeq_page + " 页    每页 ";        // 显示当前多少页

                ComputerSeq_begin=(ComputerSeq_curPage-1)*ComputerSeq_pageSize;// 起始记录号
                ComputerSeq_end = ComputerSeq_begin + 1*ComputerSeq_pageSize - 1;    // 末尾记录号
                              
                if(ComputerSeq_end > ComputerSeq_len ) ComputerSeq_end=ComputerSeq_len;
                $("#ComputerSeq_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#ComputerSeq_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=ComputerSeq_begin && x<=ComputerSeq_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivComputerSeqAss">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>上机测序任务已分派 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_ComputerSeqAss">
                          <input type="text" id="Searchval_ComputerSeqAss" name="Searchval_ComputerSeqAss" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_ComputerSeqAss","ComputerSeqAss_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="ComputerSeqAss_btn0"></a>
                    <input id="ComputerSeqAss_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="ComputerSeqAss_pageSizeSet">设置</a> 
                    <a id="ComputerSeqAss_sjzl"></a> 
                    <a href="#" id="ComputerSeqAss_btn1">首页</a>
                    <a href="#" id="ComputerSeqAss_btn2">上一页</a>
                    <a href="#" id="ComputerSeqAss_btn3">下一页</a>
                    <a href="#" id="ComputerSeqAss_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="ComputerSeqAss_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="ComputerSeqAss_btn5">跳转</a><p></p>
                    <table id="ComputerSeqAss_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>终文库名称</th>
                          <th>建库人</th>
                          <th>建库时间</th>
                          <th>终文库构建次数</th>
                          <th>任务接收者</th>
                          <th>任务进度</th>
                          <th>任务分派时间</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="ComputerSeqAss_tbody_review">
                        {%  for data in ComputerSeq_audited %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/ComputerSeq_taskToExamineDetermine/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.FinLibConName }}<input type="hidden" value = "{{ data.FinLibConName }}"/></td>
                                <td>{{ data.Build_lib_man }}<input type="hidden" value = "{{ data.Build_lib_man }}"/></td>
                                <td>{{ data.Build_lib_time }}<input type="hidden" value = "{{ data.Build_lib_time }}"/></td>
                                <td>{{ data.ExperimentTimes }}<input type="hidden" id="Build_finlib_num" name="Build_finlib_num" value = "{{ data.ExperimentTimes }}"/></td>
                                <td>{{ data.Next_TaskProgress_Man }}<input type="hidden" value = "{{ data.Next_TaskProgress_Man }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time}}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info" name="ComputerSeq_audited">查看信息</button>
                                    <button type="submit" class="label label-info" style="display: none; background: #6ebe9a" id="ComputerSeq_audited_ModifyData{{ data.id }}" name="ModifyData">修改信息</button>
                                </td>
                                <script type="text/javascript">
                                    if(document.getElementById("IP_department").value=="管理员"){
                                        document.getElementById("ComputerSeq_audited_ModifyData"+{{ data.id }}).style.display="";
                                    }
                                </script>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var ComputerSeqAss_pageSize = 5;    //每页显示的记录条数
               var ComputerSeqAss_curPage=0;        //当前页
               var ComputerSeqAss_lastPage;        //最后页
                var ComputerSeqAss_direct=0;        //方向
               var ComputerSeqAss_len;            //总行数
               var ComputerSeqAss_page;            //总页数
               var ComputerSeqAss_begin;
               var ComputerSeqAss_end;
               
               $(document).ready(function ComputerSeqAss_display(){  
                ComputerSeqAss_len =$("#ComputerSeqAss_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                ComputerSeqAss_page=ComputerSeqAss_len % ComputerSeqAss_pageSize==0 ? ComputerSeqAss_len/ComputerSeqAss_pageSize : Math.floor(ComputerSeqAss_len/ComputerSeqAss_pageSize)+1;//根据记录条数，计算页数
                ComputerSeqAss_curPage=1;    // 设置当前为第一页
                ComputerSeqAss_displayPage(1);//显示第一页
                document.getElementById("ComputerSeqAss_btn0").innerHTML="当前 " + ComputerSeqAss_curPage + "/" + ComputerSeqAss_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("ComputerSeqAss_sjzl").innerHTML="数据总量 " + ComputerSeqAss_len + "条";        // 显示数据量
                document.getElementById("ComputerSeqAss_pageSize").value = ComputerSeqAss_pageSize;        

                $("#ComputerSeqAss_btn1").click(function ComputerSeqAss_firstPage(){    // 首页
                    ComputerSeqAss_curPage=1;
                    ComputerSeqAss_direct = 0;
                    ComputerSeqAss_displayPage();
                });
                $("#ComputerSeqAss_btn2").click(function ComputerSeqAss_frontPage(){    // 上一页
                    ComputerSeqAss_direct=-1;
                    ComputerSeqAss_displayPage();
                });
                $("#ComputerSeqAss_btn3").click(function ComputerSeqAss_nextPage(){    // 下一页
                    ComputerSeqAss_direct=1;
                    ComputerSeqAss_displayPage();
                });
                $("#ComputerSeqAss_btn4").click(function ComputerSeqAss_lastPage(){    // 尾页
                    ComputerSeqAss_curPage=ComputerSeqAss_page;
                    ComputerSeqAss_direct = 0;
                    ComputerSeqAss_displayPage();
                });
                $("#ComputerSeqAss_btn5").click(function ComputerSeqAss_changePage(){    // 转页
                    ComputerSeqAss_curPage=document.getElementById("ComputerSeqAss_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(ComputerSeqAss_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (ComputerSeqAss_curPage > ComputerSeqAss_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    ComputerSeqAss_direct = 0;
                    ComputerSeqAss_displayPage();
                });
               
                $("#ComputerSeqAss_pageSizeSet").click(function ComputerSeqAss_setPageSize(){    // 设置每页显示多少条记录
                    ComputerSeqAss_pageSize = document.getElementById("ComputerSeqAss_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(ComputerSeqAss_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       ComputerSeqAss_len =$("#ComputerSeqAss_tbody_review tr").length;
                    ComputerSeqAss_page=ComputerSeqAss_len % ComputerSeqAss_pageSize==0 ? ComputerSeqAss_len/ComputerSeqAss_pageSize : Math.floor(ComputerSeqAss_len/ComputerSeqAss_pageSize)+1;//根据记录条数，计算页数
                    ComputerSeqAss_curPage=1;        //当前页
                    ComputerSeqAss_direct=0;        //方向
                                       ComputerSeqAss_displayPage();//显示第一页
                });
            });

            function ComputerSeqAss_displayPage(){
                if(ComputerSeqAss_curPage <=1 && ComputerSeqAss_direct==-1){
                    ComputerSeqAss_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (ComputerSeqAss_curPage >= ComputerSeqAss_page && ComputerSeqAss_direct==1) {
                    ComputerSeqAss_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                ComputerSeqAss_lastPage = ComputerSeqAss_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (ComputerSeqAss_len > ComputerSeqAss_pageSize) {
                                        if (ComputerSeqAss_pageSize!=1) {
                                            ComputerSeqAss_curPage = ((ComputerSeqAss_curPage + ComputerSeqAss_direct + ComputerSeqAss_len) % ComputerSeqAss_len);
                                        } else {
                                            ComputerSeqAss_curPage = ComputerSeqAss_curPage + ComputerSeqAss_direct;
                                        }
                } else {
                    ComputerSeqAss_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("ComputerSeqAss_btn0").innerHTML="当前 " + ComputerSeqAss_curPage + "/" + ComputerSeqAss_page + " 页    每页 ";        // 显示当前多少页

                ComputerSeqAss_begin=(ComputerSeqAss_curPage-1)*ComputerSeqAss_pageSize;// 起始记录号
                ComputerSeqAss_end = ComputerSeqAss_begin + 1*ComputerSeqAss_pageSize - 1;    // 末尾记录号
                              
                if(ComputerSeqAss_end > ComputerSeqAss_len ) ComputerSeqAss_end=ComputerSeqAss_len;
                $("#ComputerSeqAss_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#ComputerSeqAss_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=ComputerSeqAss_begin && x<=ComputerSeqAss_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivFin_unaud">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>财务未审核 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_Fin_unaud">
                          <input type="text" id="Searchval_Fin_unaud" name="Searchval_Fin_unaud" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_Fin_unaud","Fin_unaud_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="Fin_unaud_btn0"></a>
                    <input id="Fin_unaud_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="Fin_unaud_pageSizeSet">设置</a> 
                    <a id="Fin_unaud_sjzl"></a> 
                    <a href="#" id="Fin_unaud_btn1">首页</a>
                    <a href="#" id="Fin_unaud_btn2">上一页</a>
                    <a href="#" id="Fin_unaud_btn3">下一页</a>
                    <a href="#" id="Fin_unaud_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="Fin_unaud_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="Fin_unaud_btn5">跳转</a><p></p>
                    <table id="Fin_unaud_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>客户名称</th>
                          <th>性别</th>
                          <th>年龄（岁）</th>
                          <th>样本类型</th>
                          <th>产品名称</th>
                          <th>就诊医院</th>
                          <th>收样时间</th>
                          <th>实验编号</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="Fin_unaud_tbody_review">
                        {%  for data in Fin_unaud %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/taskFinUnaud/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.PatientName }}<input type="hidden" value = "{{ data.PatientName }}"/></td>
                                <td>{{ data.PatientSex }}<input type="hidden" value = "{{ data.PatientSex }}"/></td>
                                <td>{{ data.PatientAge }}<input type="hidden" value = "{{ data.PatientAge }}"/></td>
                                <td>{{ data.sample_type }}<input type="hidden" value = "{{ data.sample_type }}"/></td>
                                <td>{{ data.product_name }}<input type="hidden" value = "{{ data.product_name }}"/></td>
                                <td>{{ data.treatment_hospital }}<input type="hidden" value = "{{ data.treatment_hospital }}"/></td>
                                <td>{{ data.CollectSamplesDate }}<input type="hidden" value = "{{ data.CollectSamplesDate }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var Fin_unaud_pageSize = 5;    //每页显示的记录条数
               var Fin_unaud_curPage=0;        //当前页
               var Fin_unaud_lastPage;        //最后页
                var Fin_unaud_direct=0;        //方向
               var Fin_unaud_len;            //总行数
               var Fin_unaud_page;            //总页数
               var Fin_unaud_begin;
               var Fin_unaud_end;
               
               $(document).ready(function Fin_unaud_display(){  
                Fin_unaud_len =$("#Fin_unaud_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                Fin_unaud_page=Fin_unaud_len % Fin_unaud_pageSize==0 ? Fin_unaud_len/Fin_unaud_pageSize : Math.floor(Fin_unaud_len/Fin_unaud_pageSize)+1;//根据记录条数，计算页数
                Fin_unaud_curPage=1;    // 设置当前为第一页
                Fin_unaud_displayPage(1);//显示第一页

                document.getElementById("Fin_unaud_btn0").innerHTML="当前 " + Fin_unaud_curPage + "/" + Fin_unaud_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("Fin_unaud_sjzl").innerHTML="数据总量 " + Fin_unaud_len + "条";        // 显示数据量
                document.getElementById("Fin_unaud_pageSize").value = Fin_unaud_pageSize;        

                $("#Fin_unaud_btn1").click(function Fin_unaud_firstPage(){    // 首页
                    Fin_unaud_curPage=1;
                    Fin_unaud_direct = 0;
                    Fin_unaud_displayPage();
                });
                $("#Fin_unaud_btn2").click(function Fin_unaud_frontPage(){    // 上一页
                    Fin_unaud_direct=-1;
                    Fin_unaud_displayPage();
                });
                $("#Fin_unaud_btn3").click(function Fin_unaud_nextPage(){    // 下一页
                    Fin_unaud_direct=1;
                    Fin_unaud_displayPage();
                });
                $("#Fin_unaud_btn4").click(function Fin_unaud_lastPage(){    // 尾页
                    Fin_unaud_curPage=Fin_unaud_page;
                    Fin_unaud_direct = 0;
                    Fin_unaud_displayPage();
                });
                $("#Fin_unaud_btn5").click(function Fin_unaud_changePage(){    // 转页
                    Fin_unaud_curPage=document.getElementById("Fin_unaud_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(Fin_unaud_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (Fin_unaud_curPage > Fin_unaud_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    Fin_unaud_direct = 0;
                    Fin_unaud_displayPage();
                });
               
                $("#Fin_unaud_pageSizeSet").click(function Fin_unaud_setPageSize(){    // 设置每页显示多少条记录
                    Fin_unaud_pageSize = document.getElementById("Fin_unaud_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(Fin_unaud_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       Fin_unaud_len =$("#Fin_unaud_tbody_review tr").length;
                    Fin_unaud_page=Fin_unaud_len % Fin_unaud_pageSize==0 ? Fin_unaud_len/Fin_unaud_pageSize : Math.floor(Fin_unaud_len/Fin_unaud_pageSize)+1;//根据记录条数，计算页数
                    Fin_unaud_curPage=1;        //当前页
                    Fin_unaud_direct=0;        //方向
                                       Fin_unaud_displayPage();//显示第一页
                });
            });

            function Fin_unaud_displayPage(){
                if(Fin_unaud_curPage <=1 && Fin_unaud_direct==-1){
                    Fin_unaud_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (Fin_unaud_curPage >= Fin_unaud_page && Fin_unaud_direct==1) {
                    Fin_unaud_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                Fin_unaud_lastPage = Fin_unaud_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (Fin_unaud_len > Fin_unaud_pageSize) {
                                        if (Fin_unaud_pageSize!=1) {
                                            Fin_unaud_curPage = ((Fin_unaud_curPage + Fin_unaud_direct + Fin_unaud_len) % Fin_unaud_len);
                                        } else {
                                            Fin_unaud_curPage = Fin_unaud_curPage + Fin_unaud_direct;
                                        }
                } else {
                    Fin_unaud_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("Fin_unaud_btn0").innerHTML="当前 " + Fin_unaud_curPage + "/" + Fin_unaud_page + " 页    每页 ";        // 显示当前多少页

                Fin_unaud_begin=(Fin_unaud_curPage-1)*Fin_unaud_pageSize;// 起始记录号
                Fin_unaud_end = Fin_unaud_begin + 1*Fin_unaud_pageSize - 1;    // 末尾记录号
                              
                if(Fin_unaud_end > Fin_unaud_len ) Fin_unaud_end=Fin_unaud_len;
                $("#Fin_unaud_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#Fin_unaud_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=Fin_unaud_begin && x<=Fin_unaud_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivFin_NoPass">

              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>财务审核不通过 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_Not_pass_Fin">
                          <input type="text" id="Searchval_Not_pass_Fin" name="Searchval_Not_pass_Fin" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_Not_pass_Fin","Fin_Not_pass_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="Not_pass_btn0"></a>
                    <input id="Not_pass_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="Not_pass_pageSizeSet">设置</a> 
                    <a id="Not_pass_sjzl"></a> 
                    <a href="#" id="Not_pass_btn1">首页</a>
                    <a href="#" id="Not_pass_btn2">上一页</a>
                    <a href="#" id="Not_pass_btn3">下一页</a>
                    <a href="#" id="Not_pass_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="Not_pass_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="Not_pass_btn5">跳转</a><p></p>
                    <table id="Not_pass_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>项目编号</th>
                          <th>业务员</th>
                          <th>收样时间</th>
                          <th>支付方式</th>
                          <th>是否需要发票</th>
                          <th>合同金额</th>
                          <th>财务审核次数</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="Fin_Not_pass_tbody_review">

                        {%  for data in Fin_NoPass %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/contract_To_Examine_Not_Pass/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.contract_name }}<input type="hidden" value = "{{ data.contract_name }}"/></td>
                                <td>{{ data.username }}<input type="hidden" value = "{{ data.username }}"/></td>
                                <td>{{ data.acquisition_time }}<input type="hidden" value = "{{ data.acquisition_time }}"/></td>
                                <td>{{ data.pay_way }}<input type="hidden" value = "{{ data.pay_way }}"/></td>
                                <td>{{ data.is_invoice }}<input type="hidden" value = "{{ data.is_invoice }}"/></td>
                                <td>{{ data.contract_pay }}<input type="hidden" value = "{{ data.contract_pay }}"/></td>
                                <td>
                                    <select id="selected{{ data.sam_code_num }}" name="contract_Times" class="btn btn-default" required>
                                        <script type="text/javascript">
                                            contract_num = parseInt({{ data.contract_Times }});
                                            for (i = contract_num; 0 < i; i--) {
                                                var more = i;
                                                $("#selected{{ data.sam_code_num }}").append('<option value="'+more+'">'+more+'</option>');
                                            }
                                        </script>
                                    </select>
                                    <input type="hidden" value = "{{ data.contract_Times }}"/>
                                </td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var Not_pass_pageSize = 5;    //每页显示的记录条数
               var Not_pass_curPage=0;        //当前页
               var Not_pass_lastPage;        //最后页
                var Not_pass_direct=0;        //方向
               var Not_pass_len;            //总行数
               var Not_pass_page;            //总页数
               var Not_pass_begin;
               var Not_pass_end;
               
               $(document).ready(function Not_pass_display(){  
                Not_pass_len =$("#Fin_Not_pass_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                Not_pass_page=Not_pass_len % Not_pass_pageSize==0 ? Not_pass_len/Not_pass_pageSize : Math.floor(Not_pass_len/Not_pass_pageSize)+1;//根据记录条数，计算页数
                Not_pass_curPage=1;    // 设置当前为第一页
                Not_pass_displayPage(1);//显示第一页

                document.getElementById("Not_pass_btn0").innerHTML="当前 " + Not_pass_curPage + "/" + Not_pass_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("Not_pass_sjzl").innerHTML="数据总量 " + Not_pass_len + "条";        // 显示数据量
                document.getElementById("Not_pass_pageSize").value = Not_pass_pageSize;        

                $("#Not_pass_btn1").click(function Not_pass_firstPage(){    // 首页
                    Not_pass_curPage=1;
                    Not_pass_direct = 0;
                    Not_pass_displayPage();
                });
                $("#Not_pass_btn2").click(function Not_pass_frontPage(){    // 上一页
                    Not_pass_direct=-1;
                    Not_pass_displayPage();
                });
                $("#Not_pass_btn3").click(function Not_pass_nextPage(){    // 下一页
                    Not_pass_direct=1;
                    Not_pass_displayPage();
                });
                $("#Not_pass_btn4").click(function Not_pass_lastPage(){    // 尾页
                    Not_pass_curPage=Not_pass_page;
                    Not_pass_direct = 0;
                    Not_pass_displayPage();
                });
                $("#Not_pass_btn5").click(function Not_pass_changePage(){    // 转页
                    Not_pass_curPage=document.getElementById("Not_pass_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(Not_pass_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (Not_pass_curPage > Not_pass_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    Not_pass_direct = 0;
                    Not_pass_displayPage();
                });
               
                $("#Not_pass_pageSizeSet").click(function Not_pass_setPageSize(){    // 设置每页显示多少条记录
                    Not_pass_pageSize = document.getElementById("Not_pass_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(Not_pass_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       Not_pass_len =$("#Fin_Not_pass_tbody_review tr").length;
                    Not_pass_page=Not_pass_len % Not_pass_pageSize==0 ? Not_pass_len/Not_pass_pageSize : Math.floor(Not_pass_len/Not_pass_pageSize)+1;//根据记录条数，计算页数
                    Not_pass_curPage=1;        //当前页
                    Not_pass_direct=0;        //方向
                                       Not_pass_displayPage();//显示第一页
                });
            });

            function Not_pass_displayPage(){
                if(Not_pass_curPage <=1 && Not_pass_direct==-1){
                    Not_pass_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (Not_pass_curPage >= Not_pass_page && Not_pass_direct==1) {
                    Not_pass_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                Not_pass_lastPage = Not_pass_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (Not_pass_len > Not_pass_pageSize) {
                                        if (Not_pass_pageSize!=1) {
                                            Not_pass_curPage = ((Not_pass_curPage + Not_pass_direct + Not_pass_len) % Not_pass_len);
                                        } else {
                                            Not_pass_curPage = Not_pass_curPage + Not_pass_direct;
                                        }
                } else {
                    Not_pass_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("Not_pass_btn0").innerHTML="当前 " + Not_pass_curPage + "/" + Not_pass_page + " 页    每页 ";        // 显示当前多少页

                Not_pass_begin=(Not_pass_curPage-1)*Not_pass_pageSize;// 起始记录号
                Not_pass_end = Not_pass_begin + 1*Not_pass_pageSize - 1;    // 末尾记录号
                              
                if(Not_pass_end > Not_pass_len ) Not_pass_end=Not_pass_len;
                $("#Fin_Not_pass_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#Fin_Not_pass_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=Not_pass_begin && x<=Not_pass_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivSuspend">

              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>暂停任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_Suspend">
                          <input type="text" id="Searchval_Suspend" name="Searchval_Suspend" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_Suspend","Suspend_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="Suspend_btn0"></a>
                    <input id="Suspend_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="Suspend_pageSizeSet">设置</a> 
                    <a id="Suspend_sjzl"></a> 
                    <a href="#" id="Suspend_btn1">首页</a>
                    <a href="#" id="Suspend_btn2">上一页</a>
                    <a href="#" id="Suspend_btn3">下一页</a>
                    <a href="#" id="Suspend_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="Suspend_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="Suspend_btn5">跳转</a><p></p>
                    <table id="Suspend_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>任务进度</th>
                          <th>任务暂停时间</th>
                          <th>备注</th>
                          <th>操作</th>
                        </tr>
                      </thead>

                       <tbody id="Suspend_tbody_review">

                        {%  for data in suspend %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/taskToExamineSuspend/">
                            <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" id="Next_TaskProgress" name="Next_TaskProgress" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time }}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>{{ data.Next_TaskProgress_Remarks }}<input type="hidden" value = "{{ data.Next_TaskProgress_Remarks }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            <input type="hidden" id="Pretreatment" name="Pretreatment" value = "样本预处理"/></td>
                            <input type="hidden" id="DNA_extraction" name="DNA_extraction" value = "DNA提取"/></td>
                            <input type="hidden" id="PreLibCon" name="PreLibCon" value = "预文库构建"/></td>
                            <input type="hidden" id="FinLibCon" name="FinLibCon" value = "终文库构建"/></td>
                            <input type="hidden" id="ComSeq" name="ComSeq" value = "上机测序"/></td>
                            <input type="hidden" id="ExperimentTimes" name="ExperimentTimes" value = "{{ data.ExperimentTimes }}"/></td>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var Suspend_pageSize = 5;    //每页显示的记录条数
               var Suspend_curPage=0;        //当前页
               var Suspend_lastPage;        //最后页
                var Suspend_direct=0;        //方向
               var Suspend_len;            //总行数
               var Suspend_page;            //总页数
               var Suspend_begin;
               var Suspend_end;
               
               $(document).ready(function Suspend_display(){  
                Suspend_len =$("#Suspend_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                Suspend_page=Suspend_len % Suspend_pageSize==0 ? Suspend_len/Suspend_pageSize : Math.floor(Suspend_len/Suspend_pageSize)+1;//根据记录条数，计算页数
                Suspend_curPage=1;    // 设置当前为第一页
                Suspend_displayPage(1);//显示第一页

                document.getElementById("Suspend_btn0").innerHTML="当前 " + Suspend_curPage + "/" + Suspend_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("Suspend_sjzl").innerHTML="数据总量 " + Suspend_len + "条";        // 显示数据量
                document.getElementById("Suspend_pageSize").value = Suspend_pageSize;        

                $("#Suspend_btn1").click(function Suspend_firstPage(){    // 首页
                    Suspend_curPage=1;
                    Suspend_direct = 0;
                    Suspend_displayPage();
                });
                $("#Suspend_btn2").click(function Suspend_frontPage(){    // 上一页
                    Suspend_direct=-1;
                    Suspend_displayPage();
                });
                $("#Suspend_btn3").click(function Suspend_nextPage(){    // 下一页
                    Suspend_direct=1;
                    Suspend_displayPage();
                });
                $("#Suspend_btn4").click(function Suspend_lastPage(){    // 尾页
                    Suspend_curPage=Not_pass_page;
                    Suspend_direct = 0;
                    Suspend_displayPage();
                });
                $("#Suspend_btn5").click(function Suspend_changePage(){    // 转页
                    Suspend_curPage=document.getElementById("Suspend_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(Suspend_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (Suspend_curPage > Suspend_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    Suspend_direct = 0;
                    Suspend_displayPage();
                });
               
                $("#Suspend_pageSizeSet").click(function Suspend_setPageSize(){    // 设置每页显示多少条记录
                    Suspend_pageSize = document.getElementById("Suspend_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(Suspend_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       Suspend_len =$("#Suspend_tbody_review tr").length;
                    Suspend_page=Suspend_len % Suspend_pageSize==0 ? Suspend_len/Suspend_pageSize : Math.floor(Suspend_len/Suspend_pageSize)+1;//根据记录条数，计算页数
                    Suspend_curPage=1;        //当前页
                    Suspend_direct=0;        //方向
                                       Suspend_displayPage();//显示第一页
                });
            });

            function Suspend_displayPage(){
                if(Suspend_curPage <=1 && Suspend_direct==-1){
                    Suspend_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (Suspend_curPage >= Suspend_page && Suspend_direct==1) {
                    Suspend_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                Suspend_lastPage = Suspend_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (Suspend_len > Suspend_pageSize) {
                                        if (Suspend_pageSize!=1) {
                                            Suspend_curPage = ((Suspend_curPage + Suspend_direct + Suspend_len) % Suspend_len);
                                        } else {
                                            Suspend_curPage = Suspend_curPage + Suspend_direct;
                                        }
                } else {
                    Suspend_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("Suspend_btn0").innerHTML="当前 " + Suspend_curPage + "/" + Suspend_page + " 页    每页 ";        // 显示当前多少页

                Suspend_begin=(Suspend_curPage-1)*Suspend_pageSize;// 起始记录号
                Suspend_end = Suspend_begin + 1*Suspend_pageSize - 1;    // 末尾记录号
                              
                if(Suspend_end > Suspend_len ) Suspend_end=Suspend_len;
                $("#Suspend_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#Suspend_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=Suspend_begin && x<=Suspend_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>


        <div class="row" style="display:none" id="DivStop">

              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>终止任务 <small>（临检）</small></h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div style="width: 20%">
                      <form name="Searchform_SampleExper_Stop">
                          <input type="text" id="Searchval_SampleExper_Stop" name="Searchval_SampleExper_Stop" class="form-control col-md-7 col-xs-12" style="width: 80%" placeholder="Search for...">
                          <span>
                              <button class="btn btn-primary" type="button"  onclick=search("Searchval_SampleExper_Stop","SampleExper_Stop_tbody_review")>Go!</button>
                          </span>
                      </form>
                  </div>

                  <div class="x_content">
					<a id="Stop_btn0"></a>
                    <input id="Stop_pageSize" type="text" size="1" maxlength="2" value="getDefaultValue()"/><a> 条 </a> <a href="#" id="Stop_pageSizeSet">设置</a> 
                    <a id="Stop_sjzl"></a> 
                    <a href="#" id="Stop_btn1">首页</a>
                    <a href="#" id="Stop_btn2">上一页</a>
                    <a href="#" id="Stop_btn3">下一页</a>
                    <a href="#" id="Stop_btn4">尾页</a> 
                    <a>转到 </a>
                    <input id="Stop_changePage" type="text" size="1" maxlength="4"/>
                    <a>页 </a>
                    <a href="#" id="Stop_btn5">跳转</a><p></p>
                    <table id="Stop_datatable_responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th>条码号</th>
                          <th>实验编号</th>
                          <th>任务进度</th>
                          <th>任务停止时间</th>
                          <th>备注</th>
                          <th>操作</th>
                        </tr>
                      </thead>
                       <tbody id="SampleExper_Stop_tbody_review">
                        {%  for data in stop %}
                            <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post" action="/taskToExamineStop/">
                             <tr>
                                <td>{{ data.sam_code_num }}<input type="hidden" id="sam_code_num" name="sam_code_num" value = "{{ data.sam_code_num }}"/></td>
                                <td>{{ data.ExperimentNumber }}<input type="hidden" value = "{{ data.ExperimentNumber }}"/></td>
                                <td>{{ data.Next_TaskProgress }}<input type="hidden" id="Next_TaskProgress" name="Next_TaskProgress" value = "{{ data.Next_TaskProgress }}"/></td>
                                <td>{{ data.Next_TaskProgress_Time }}<input type="hidden" value = "{{ data.Next_TaskProgress_Time }}"/></td>
                                <td>{{ data.Next_TaskProgress_Remarks }}<input type="hidden" value = "{{ data.Next_TaskProgress_Remarks }}"/></td>
                                <td>
                                    <button type="submit" class="label label-info">查看信息</button>
                                </td>
                            </tr>
                            <input type="hidden" id="DNA_extraction" name="DNA_extraction" value = "DNA提取"/></td>
                            <input type="hidden" id="PreLibCon" name="PreLibCon" value = "预文库构建"/></td>
                            <input type="hidden" id="FinLibCon" name="FinLibCon" value = "终文库构建"/></td>
                            <input type="hidden" id="ComSeq" name="ComSeq" value = "上机测序"/></td>
                            <input type="hidden" id="ExperimentTimes" name="ExperimentTimes" value = "{{ data.ExperimentTimes }}"/></td>

                            <input type="hidden" id="DNA_extraction_num" name="DNA_extraction_num" value = "{{ data.DNA_extraction_num }}"/></td>
                            <input type="hidden" id="Build_Prelib_num" name="Build_Prelib_num" value = "{{ data.Build_Prelib_num }}"/></td>
                            <input type="hidden" id="Build_finlib_num" name="Build_finlib_num" value = "{{ data.Build_finlib_num }}"/></td>
                            </form>
                        {% endfor %}

                      </tbody>
                      <script type="text/javascript">
               var Stop_pageSize = 5;    //每页显示的记录条数
               var Stop_curPage=0;        //当前页
               var Stop_lastPage;        //最后页
                var Stop_direct=0;        //方向
               var Stop_len;            //总行数
               var Stop_page;            //总页数
               var Stop_begin;
               var Stop_end;
               
               $(document).ready(function Stop_display(){  
                Stop_len =$("#SampleExper_Stop_tbody_review tr").length;    // 求这个表的总行数，剔除第一行介绍
                Stop_page=Stop_len % Stop_pageSize==0 ? Stop_len/Stop_pageSize : Math.floor(Stop_len/Stop_pageSize)+1;//根据记录条数，计算页数
                Stop_curPage=1;    // 设置当前为第一页
                Stop_displayPage(1);//显示第一页

                document.getElementById("Stop_btn0").innerHTML="当前 " + Stop_curPage + "/" + Stop_page + " 页    每页 ";    // 显示当前多少页
                document.getElementById("Stop_sjzl").innerHTML="数据总量 " + Stop_len + "条";        // 显示数据量
                document.getElementById("Stop_pageSize").value = Stop_pageSize;        

                $("#Stop_btn1").click(function Stop_firstPage(){    // 首页
                    Stop_curPage=1;
                    Stop_direct = 0;
                    Stop_displayPage();
                });
                $("#Stop_btn2").click(function Stop_frontPage(){    // 上一页
                    Stop_direct=-1;
                    Stop_displayPage();
                });
                $("#Stop_btn3").click(function Stop_nextPage(){    // 下一页
                    Stop_direct=1;
                    Stop_displayPage();
                });
                $("#Stop_btn4").click(function Stop_lastPage(){    // 尾页
                    Stop_curPage=Stop_page;
                    Stop_direct = 0;
                    Stop_displayPage();
                });
                $("#Stop_btn5").click(function Stop_changePage(){    // 转页
                    Stop_curPage=document.getElementById("Stop_changePage").value * 1;
                    if (!/^[1-9]\d*$/.test(Stop_curPage)) {
                        alert("请输入正整数");
                        return ;
                    }
                    if (Stop_curPage > Stop_page) {
                        alert("超出数据页面");
                        return ;
                    }
                    Stop_direct = 0;
                    Stop_displayPage();
                });
               
                $("#Stop_pageSizeSet").click(function Stop_setPageSize(){    // 设置每页显示多少条记录
                    Stop_pageSize = document.getElementById("Stop_pageSize").value;    //每页显示的记录条数
                    if (!/^[1-9]\d*$/.test(Stop_pageSize)) {
                        alert("请输入大于0的整数");
                        return ;
                    }
                    //len =$("#tbody_review tr").length - 1;
                                       Stop_len =$("#SampleExper_Stop_tbody_review tr").length;
                    Stop_page=Stop_len % Stop_pageSize==0 ? Stop_len/Stop_pageSize : Math.floor(Stop_len/Stop_pageSize)+1;//根据记录条数，计算页数
                    Stop_curPage=1;        //当前页
                    Stop_direct=0;        //方向
                                       Stop_displayPage();//显示第一页
                });
            });

            function Stop_displayPage(){
                if(Stop_curPage <=1 && Stop_direct==-1){
                    Stop_direct=0;
                    alert("已经是第一页了");
                    return;
                } else if (Stop_curPage >= Stop_page && Stop_direct==1) {
                    Stop_direct=0;
                    alert("已经是最后一页了");
                    return ;
                }

                Stop_lastPage = Stop_curPage;

                // 修复当len=1时，curPage计算得0的bug
                if (Stop_len > Stop_pageSize) {
                                        if (Stop_pageSize!=1) {
                                            Stop_curPage = ((Stop_curPage + Stop_direct + Stop_len) % Stop_len);
                                        } else {
                                            Stop_curPage = Stop_curPage + Stop_direct;
                                        }
                } else {
                    Stop_curPage = 1;
                }
                               //alert("pass_curPage"+pass_curPage);
                document.getElementById("Stop_btn0").innerHTML="当前 " + Stop_curPage + "/" + Stop_page + " 页    每页 ";        // 显示当前多少页

                Stop_begin=(Stop_curPage-1)*Stop_pageSize;// 起始记录号
                Stop_end = Stop_begin + 1*Stop_pageSize - 1;    // 末尾记录号
                              
                if(Stop_end > Stop_len ) Stop_end=Stop_len;
                $("#SampleExper_Stop_tbody_review tr").hide();    // 首先，设置这行为隐藏
                $("#SampleExper_Stop_tbody_review tr").each(function(x){    // 然后，通过条件判断决定本行是否恢复显示
                   if(x>=Stop_begin && x<=Stop_end) {//显示begin<=x<=end的记录
                                            $(this).show();
                                        }
                });
             }

                    </script>

                    </table>

                  </div>
                </div>
              </div>
            </div>

        <script>
            function show(e){
                var id=e.getAttribute("id");
                button=exist(id);
                button.setAttribute("style","border: 0; background-color: white;color: red;");
                setbuttonStyle(id);
                setDivStyle(id);
            }
            function setbuttonStyle(id){
                var mycars=new Array("Pretreatment","DNAExtract","PreLibraryConstruction","FinalLibraryConstruction","ComputerSequencing","OtherInformation");
                for (i=0;i<mycars.length;i++) {
                     button=exist(mycars[i]);
                     if(mycars[i]!=id){
                        button.setAttribute("style","border: 0; background-color: white;color: black;");  
                     }
                }
        }
            function contains(arr,obj){
              var i=arr.length;  
              while(i--){  
                if(arr[i] === obj){  
                  return true;  
                }
              }
              return false;  
            }
            function setDivStyle(id){
                var divArray=new Array();
                if(id=="Pretreatment"){
                     divArray=new Array("DivDPretreatment","DivDPretreatmentAss");
                }else if(id=="DNAExtract"){
                     divArray=new Array("DivDNAExt","DivDNAExtAss");
                }else if(id=="PreLibraryConstruction"){
                    divArray=new Array("DivPreLibCon","DivPreLibConAss");
                }else if(id=="FinalLibraryConstruction"){
                    divArray=new Array("DivFinLibCon","DivFinLibConAss");
                }else if(id=="ComputerSequencing"){
                    divArray=new Array("DivComputerSeq","DivComputerSeqAss");
                }else if(id=="OtherInformation"){
                    divArray=new Array("DivFin_unaud","DivFin_NoPass","DivSuspend","DivStop");
                }
                var mycars=new Array("DivDPretreatment","DivDPretreatmentAss","DivDNAExt","DivDNAExtAss","DivPreLibCon",
                    "DivPreLibConAss","DivFinLibCon","DivFinLibConAss","DivComputerSeq","DivComputerSeqAss","DivFin_unaud","DivFin_NoPass","DivSuspend","DivStop");
                for (i=0;i<mycars.length;i++) {
                     if(contains(divArray,mycars[i])){
                        document.getElementById(mycars[i]).style.display="block";
                     }else{
                        document.getElementById(mycars[i]).style.display="none";
                     }
                } 
        }
            function exist(id){
                var bt=document.getElementById(id);
          if(null==bt){
           return false;
          }else{
             return bt;    
          }
        }
        </script>

{% endblock %}